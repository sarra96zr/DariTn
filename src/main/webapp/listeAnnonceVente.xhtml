<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">
<ui:composition template="/template/template.xhtml">
	<ui:param name="Product" value="Accueil" />
	<ui:define name="content">


		<h:head>
			<title>Annonces</title>
			<style type="text/css">
.tg {
	border-collapse: collapse;
	border-spacing: 0;
	border-color: #ccc;
}

.tg p {
	font-family: Arial, sans-serif;
	font-size: 14px;
	padding: 10px 5px;
	border-style: solid;
	border-width: 1px;
	overflow: hidden;
	word-break: normal;
	border-color: #ccc;
	color: #333;
	background-color: #fff;
}

.tg h {
	font-family: Arial, sans-serif;
	font-size: 14px;
	font-weight: normal;
	padding: 10px 5px;
	border-style: solid;
	border-width: 1px;
	overflow: hidden;
	word-break: normal;
	border-color: #ccc;
	color: #333;
	background-color: #f0f0f0;
}

<!--
Theme Informations --> <meta name ="viewport " content
	 ="width =device-width, initial-scale =1"/> <meta name ="description "
	content
	 =""/> <meta name ="keywords " content =""/> <meta name ="author "
	content
	 =""/><!--Theme Informations --> <title>Real Estate-Responsive Theme
	 </title><!--Stylesheets --> <link rel ="stylesheet " href
	 ="bootstrap /css/bootstrap.css "/> <link rel ="stylesheet " href
	 ="css /common-style.css "/> <link rel ="stylesheet " href
	 ="css /magnific-popup.css "/> <link rel ="stylesheet " href
	 ="css /style_third_theme.css "/><!--Stylesheets --><!--Icons & Fonts -->
	<link rel ="stylesheet " href ="font-awesome /css/font-awesome.min.css 
	 "/><!--Icons 
	 & Fonts -->.tg .tg-4eph {
	background-color: #f9f9f9
}

.yui-carousel-element li {
	height: 321px;
}
</style>
		</h:head>
		<br></br>
		<br></br>
		<br></br>


		<center>

			<h:form id="form">

				<h1>Annonces</h1>

				<div class="products-table-header" align="center">
					<span style="font-weight: bold">Cherchez votre annonce</span> <span
						class="filter-container ui-input-icon-left"> <i
						class="pi pi-search" /> <p:inputText id="globalFilter"
							onkeyup="PF('dtProducts').RechercheAnnonce(titre)"
							placeholder="Search" />
					</span>
				</div>
				<h:form id="form">
					<p:growl id="messages" showDetail="true" />
					<p:toolbar>
						<p:toolbarGroup>

							<f:facet name="header">
								<div class="products-table-header">
									<span style="font-weight: bold">Liste des annonces</span> <span
										class="filter-container ui-input-icon-left"> <i
										class="pi pi-search" /> <p:inputText id="globalFilter"
											onkeyup="PF('dtProducts').RechercheAnnonce(annonce_title)"
											placeholder="Search" />
									</span>
								</div>
							</f:facet>
						</p:toolbarGroup>
						<p:toolbarGroup align="right">
							<h:button value="Deposer votre annonce" outcome="addAnnonce"
								styleClass="ui-button-success" />
						</p:toolbarGroup>
					</p:toolbar>


				</h:form>

				<p:carousel value="#{annController.getAnnonceVente()}"
					var="annonceVente" responsive="true">


					<div class="product-grid-item-top">
						<div>
							<i class="pi pi-tag product-category-icon" /> <span
								class="product-category"><h2>#{annonceVente.titre}</h2></span>
						</div>
					</div>
					<div class="product-grid-item-content">
						<img class="responsive" src="img/selling-img/sel-img1.jpg"
							width="100" height="100" />
						<div class="product-name">#{annonceVente.description}</div>
						<div class="product-description">#{annonceVente.adresse}</div>

					</div>

					<h:outputText value="#{annonceVente.prix}"
						styleClass="product-price">
						<f:convertNumber currencySymbol="DT/m2" type="currency" />
					</h:outputText>
					<h:outputText value="#{annonceVente.surface}"
						styleClass="product-price">
						<f:convertNumber currencySymbol="m2" type="currency" />
					</h:outputText>

					<br></br>
					<p:rating readonly="true" value="#{annonceVente.rating}" />
					<br></br>

					<p:commandButton value="Acheter" icon="pi pi-plus"
						oncomplete="PF('manageProductDialog').show()"
						styleClass="ui-button-info" style="margin-right: .5rem">
						<p:resetInput target="manage-product-content" />
					</p:commandButton>


					<p:linkButton outcome="modifAnnonce" value="Modifier"
						style="margin-right:20px;">
						<f:param name="id" value="#{annonceVente.id}" />
					</p:linkButton>

					<h:commandButton
						action="#{annController.removeAnnonce(annonceVente.id)}"
						value="Supprimer" />


					<h:form>
						<p:growl id="growl" showDetail="true" />
						<p:growl id="growl-sticky" for="sticky-key" showDetail="true"
							sticky="true" />
					</h:form>



					<p:dialog header="Deposer votre demande d'achats" showEffect="fade"
						modal="true" widgetVar="manageProductDialog" responsive="true"
						minHeight="40" width="350" minimizable="true" maximizable="true">
						<p:outputPanel id="manage-product-content" class="ui-fluid">
							<p:outputPanel rendered="#{not empty annController}">


								<p:outputLabel>Prix de la location :</p:outputLabel>
								<br />
								<h:outputText value="#{annController.getPrixVente()}"
									styleClass="product-price">
									<f:convertNumber currencySymbol="DT" type="currency" />
								</h:outputText>


							</p:outputPanel>
						</p:outputPanel>

						<f:facet name="footer">



							<p:commandButton value="Afficher prix" icon="pi pi-check"
								action="#{annController.calculV(annonceVente.id)}"
								update="manage-product-content"
								process="manage-product-content @this" />

							<p:commandButton value="Valider" icon="pi pi-check"
								action="#{annController.acheter(annonceVente.id)}"
								update="manage-product-content"
								process="manage-product-content @this"
								oncomplete="javascript:window.location.reload()" />

							<p:commandButton value="Annuler" icon="pi pi-times"
								onclick="PF('manageProductDialog').hide()"
								class="ui-button-secondary" />

						</f:facet>
					</p:dialog>


					<f:facet name="footer">
						<center>
							<h2>In total there are
								#{fn:length(annController.annonceVente)} annonces.</h2>
						</center>
					</f:facet>
				</p:carousel>

			</h:form>

		</center>


	</ui:define>
</ui:composition>
</html>